<script>
    require(['jquery', 'EasyWebApp'],  function ($, EWA) {

        EWA.component(function (data) {

            data.reload = function () {

                $( self ).one('popstate',  function () {

                    self.location.reload();
                });

                self.history.back();
            };
        });
    });
</script>

<form class="container form-inline text-center"
      method="post" action="?data=user/session" ondata="${view.reload}">
    <div class="form-group">
        <input type="tel" class="form-control"
               name="mobilePhoneNumber" required minlength="11"
               placeholder="手机号" />
    </div>
    <div class="form-group">
        <input type="text" class="form-control"
               name="SMSCode" required pattern="\w{6}"
               placeholder="验证码" />
        <a class="btn btn-success"
           data-method="post" href="?data=user/SMSCode"
           data-mobile-phone-number="${view.mobilePhoneNumber}">
            短信发送
        </a>
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-primary"
                disabled="${! this.form.checkValidity()}">
            登录
        </button>
    </div>
</form>
